<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å’Œç²‹ WASUI - ç®¡ç†ç”»é¢</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Noto+Serif+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: #f5f7fa;
            color: #333;
        }

        /* ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #2d5f3f, #4a7c59);
        }

        .login-box {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
        }

        .login-logo {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-logo h1 {
            color: #2d5f3f;
            font-size: 2rem;
            margin-bottom: 5px;
            font-family: 'Noto Serif JP', serif;
        }

        .login-logo .logo-sub {
            color: #d4af37;
            font-size: 1.2rem;
            font-weight: 400;
            letter-spacing: 2px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #2d5f3f;
            box-shadow: 0 0 0 3px rgba(45, 95, 63, 0.1);
        }

        .btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #2d5f3f, #4a7c59);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: linear-gradient(135deg, #4a7c59, #2d5f3f);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(45, 95, 63, 0.3);
        }

        /* ç®¡ç†ç”»é¢ã®ãƒ¡ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ« */
        .admin-container {
            display: none;
            min-height: 100vh;
            flex-direction: row;
        }

        .admin-sidebar {
            width: 280px;
            background: linear-gradient(180deg, #2d5f3f, #1a3d2e);
            color: white;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 30px 20px;
            text-align: center;
            border-bottom: 1px solid #4a7c59;
        }

        .sidebar-header h2 {
            font-size: 1.5rem;
            margin-bottom: 5px;
            font-family: 'Noto Serif JP', serif;
        }

        .sidebar-header .logo-sub {
            color: #d4af37;
            font-size: 0.9rem;
            letter-spacing: 1px;
        }

        .menu-items {
            list-style: none;
            padding: 20px 0;
        }

        .menu-item {
            display: block;
            padding: 15px 25px;
            color: #ecf0f1;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            border-left: 4px solid transparent;
        }

        .menu-item:hover,
        .menu-item.active {
            background: rgba(255,255,255,0.1);
            border-left-color: #d4af37;
        }

        .main-content {
            margin-left: 280px;
            padding: 30px;
            width: calc(100% - 280px);
        }

        .page-header {
            margin-bottom: 30px;
        }

        .page-title {
            font-size: 2rem;
            color: #2d5f3f;
            margin-bottom: 10px;
            font-family: 'Noto Serif JP', serif;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .content-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .card-header {
            padding: 20px 30px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-body {
            padding: 30px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #2d5f3f, #4a7c59);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #4a7c59, #2d5f3f);
            transform: translateY(-1px);
        }

        /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 0;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            padding: 20px 30px;
            background: linear-gradient(135deg, #2d5f3f, #4a7c59);
            color: white;
            border-radius: 12px 12px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body {
            padding: 30px;
        }

        .close {
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }

        /* ãƒ†ãƒ¼ãƒ–ãƒ« */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .data-table th,
        .data-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        .data-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2d5f3f;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-inactive {
            background: #f8d7da;
            color: #721c24;
        }

        .action-buttons {
            display: flex;
            gap: 5px;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-weight: 500;
        }

        .btn-edit {
            background: #17a2b8;
            color: white;
        }

        .btn-delete {
            background: #dc3545;
            color: white;
        }

        /* çµ±è¨ˆã‚«ãƒ¼ãƒ‰ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #2d5f3f;
            margin-bottom: 10px;
        }

        .stat-label {
            color: #666;
            font-weight: 500;
        }

        /* ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .file-upload-container {
            margin-bottom: 15px;
        }

        .file-upload-btn {
            display: inline-block;
            padding: 10px 20px;
            background: linear-gradient(135deg, #2d5f3f, #4a7c59);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }

        .file-upload-btn:hover {
            background: linear-gradient(135deg, #4a7c59, #2d5f3f);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(45, 95, 63, 0.3);
        }

        .image-preview {
            margin-top: 10px;
            padding: 10px;
            border: 2px dashed #ddd;
            border-radius: 8px;
            text-align: center;
            min-height: 60px;
            background: #fafafa;
        }

        .image-preview-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .image-preview img {
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .image-preview img:hover {
            transform: scale(1.05);
        }

        /* ãƒ•ã‚©ãƒ¼ãƒ ã®æ”¹å–„ */
        .help-text {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            font-style: italic;
        }

        .help-icon {
            display: inline-block;
            margin-left: 5px;
            color: #2d5f3f;
            cursor: help;
            font-size: 14px;
        }

        /* é€šçŸ¥ */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            font-weight: 500;
            z-index: 2000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .notification.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 768px) {
            .admin-sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .admin-sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                width: 100%;
                padding: 20px;
            }

            .modal-content {
                margin: 10% auto;
                width: 95%;
            }

            .modal-body {
                padding: 20px;
            }
        }

        /* ã‚«ãƒ†ã‚´ãƒªåˆ¥ã‚«ãƒ©ãƒ¼ */
        .category-baum { background: #f8f4e6; color: #d4af37; border-left: 4px solid #d4af37; }
        .category-seasonal { background: #ffebee; color: #ff6b6b; border-left: 4px solid #ff6b6b; }
        .category-gift { background: #e0f7fa; color: #4ecdc4; border-left: 4px solid #4ecdc4; }
        .category-baked { background: #fce4ec; color: #e91e63; border-left: 4px solid #e91e63; }
        .category-other { background: #f3e5f5; color: #9b59b6; border-left: 4px solid #9b59b6; }
        .category-default { background: #f5f5f5; color: #666; border-left: 4px solid #ccc; }

        /* ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”¨ã‚«ãƒ†ã‚´ãƒªã‚«ãƒ©ãƒ¼ */
        .category-review { background: #fff8e1; color: #ff8f00; border-left: 4px solid #ff8f00; }

        /* ã‚®ãƒ•ãƒˆã‚µãƒ¼ãƒ“ã‚¹è¡¨ç¤º */
        .gift-services {
            margin-top: 8px;
            padding: 8px 12px;
            background: #f8f9fa;
            border-radius: 4px;
            font-size: 0.9em;
            color: #666;
        }

        /* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚°ãƒ«ãƒ¼ãƒ— */
        .checkbox-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 8px;
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: normal;
        }

        /* ãŠçŸ¥ã‚‰ã›ã‚«ãƒ†ã‚´ãƒªã‚«ãƒ©ãƒ¼ */
        .category-new { background: #e8f5e8; color: #2e7d32; }
        .category-campaign { background: #fff3e0; color: #f57c00; }
        .category-notice { background: #e3f2fd; color: #1976d2; }
        .category-event { background: #f3e5f5; color: #7b1fa2; }
        .category-important { background: #ffebee; color: #c62828; }

        /* å„ªå…ˆåº¦ã‚«ãƒ©ãƒ¼ */
        .status-warning { background: #fff3cd; color: #856404; }
    </style>
</head>
<body>
    <!-- ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ -->
    <div id="login-container" class="login-container">
        <div class="login-box">
            <div class="login-logo">
                <h1>å’Œç²‹</h1>
                <div class="logo-sub">WASUI</div>
                <p style="margin-top: 15px; color: #666;">ç®¡ç†ç”»é¢ã¸ãƒ­ã‚°ã‚¤ãƒ³</p>
            </div>
            <form id="login-form">
                <div class="form-group">
                    <label for="username">ãƒ¦ãƒ¼ã‚¶ãƒ¼å</label>
                    <input type="text" id="username" class="form-control" value="wasui_admin" required>
                </div>
                <div class="form-group">
                    <label for="password">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
                    <input type="password" id="password" class="form-control" value="wasui2024" required>
                </div>
                <button type="submit" class="btn">
                    <i class="fas fa-sign-in-alt"></i> ãƒ­ã‚°ã‚¤ãƒ³
                </button>
            </form>
            <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; font-size: 0.85rem; color: #666;">
                <strong>ğŸ¡ å’Œç²‹ CMSç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </strong><br>
                âœ… ãŠçŸ¥ã‚‰ã›ãƒ»å•†å“ãƒ»ã‚®ãƒ•ãƒˆãƒ»ãŠå®¢æ§˜ã®å£°ã®ç®¡ç†<br>
                âœ… ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½<br>
                âœ… ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ<br><br>
                <strong>ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±:</strong><br>
                ãƒ¦ãƒ¼ã‚¶ãƒ¼å: wasui_admin<br>
                ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: wasui2024
            </div>
        </div>
    </div>

    <!-- ãƒ¡ã‚¤ãƒ³ç®¡ç†ç”»é¢ -->
    <div id="admin-container" class="admin-container">
        <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
        <nav class="admin-sidebar">
            <div class="sidebar-header">
                <h2>å’Œç²‹</h2>
                <div class="logo-sub">WASUI</div>
                <p>ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </p>
            </div>
            <ul class="menu-items">
                <li class="menu-item active" data-section="dashboard">
                    <i class="fas fa-chart-bar"></i> ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
                </li>
                <li class="menu-item" data-section="news">
                    <i class="fas fa-newspaper"></i> ãŠçŸ¥ã‚‰ã›ç®¡ç†
                </li>
                <li class="menu-item" data-section="products">
                    <i class="fas fa-cookie-bite"></i> å•†å“ç®¡ç†
                </li>
                <li class="menu-item" data-section="gifts">
                    <i class="fas fa-gift"></i> ã‚®ãƒ•ãƒˆç®¡ç†
                </li>
                <li class="menu-item" data-section="reviews">
                    <i class="fas fa-star"></i> ãŠå®¢æ§˜ã®å£°ç®¡ç†
                </li>
                <li class="menu-item" data-section="settings">
                    <i class="fas fa-cog"></i> ã‚µã‚¤ãƒˆè¨­å®š
                </li>
                <li class="menu-item" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
                </li>
            </ul>
        </nav>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
        <main class="main-content">
            <!-- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ -->
            <section id="dashboard" class="section active">
                <div class="page-header">
                    <h1 class="page-title">ğŸ“Š ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
                    <p>å’Œç²‹ã®ç®¡ç†çŠ¶æ³ã‚’ç¢ºèªã§ãã¾ã™</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="stats-news">0</div>
                        <div class="stat-label">ãŠçŸ¥ã‚‰ã›ä»¶æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="stats-products">0</div>
                        <div class="stat-label">ç™»éŒ²å•†å“æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="stats-gifts">0</div>
                        <div class="stat-label">ã‚®ãƒ•ãƒˆå•†å“æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="stats-reviews">0</div>
                        <div class="stat-label">ãŠå®¢æ§˜ã®å£°</div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="card-header">
                        <h3>ğŸ¡ å’Œç²‹ CMSç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </h3>
                    </div>
                    <div class="card-body">
                        <div style="display: grid; gap: 15px;">
                            <div style="padding: 15px; background: #e8f5e8; border-radius: 8px; border-left: 4px solid #4caf50;">
                                <strong>ğŸ“° ãŠçŸ¥ã‚‰ã›ç®¡ç†</strong><br>
                                æ–°ç€æƒ…å ±ã€ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã€ãŠåº—ã‹ã‚‰ã®ãŠçŸ¥ã‚‰ã›ã‚’ç®¡ç†
                            </div>
                            <div style="padding: 15px; background: #fff3e0; border-radius: 8px; border-left: 4px solid #ff9800;">
                                <strong>ğŸ° å•†å“ç®¡ç†</strong><br>
                                ãƒã‚¦ãƒ ã‚¯ãƒ¼ãƒ˜ãƒ³ã€å­£ç¯€é™å®šå“ã€ç„¼ãè“å­ãªã©ã®å•†å“æƒ…å ±ã‚’ç®¡ç†
                            </div>
                            <div style="padding: 15px; background: #e3f2fd; border-radius: 8px; border-left: 4px solid #2196f3;">
                                <strong>ğŸ ã‚®ãƒ•ãƒˆç®¡ç†</strong><br>
                                ãŠç¥ã„ã€ãŠæ­³æš®ã€å†…ç¥ã„ãªã©ã‚·ãƒ¼ãƒ³åˆ¥ã‚®ãƒ•ãƒˆå•†å“ã‚’ç®¡ç†
                            </div>
                            <div style="padding: 15px; background: #f3e5f5; border-radius: 8px; border-left: 4px solid #9c27b0;">
                                <strong>â­ ãŠå®¢æ§˜ã®å£°ç®¡ç†</strong><br>
                                ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚„è©•ä¾¡ã€ãŠå®¢æ§˜ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç®¡ç†
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ãŠçŸ¥ã‚‰ã›ç®¡ç† -->
            <section id="news" class="section">
                <div class="page-header">
                    <h1 class="page-title">ğŸ“° ãŠçŸ¥ã‚‰ã›ç®¡ç†</h1>
                    <p>ãŠçŸ¥ã‚‰ã›ã®è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ãŒã§ãã¾ã™</p>
                </div>

                <div class="content-card">
                    <div class="card-header">
                        <h3>ãŠçŸ¥ã‚‰ã›ä¸€è¦§</h3>
                        <button class="btn-primary" onclick="openNewsModal()">
                            <i class="fas fa-plus"></i> æ–°è¦ãŠçŸ¥ã‚‰ã›
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="news-list">
                            <p>ãŠçŸ¥ã‚‰ã›ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- å•†å“ç®¡ç† -->
            <section id="products" class="section">
                <div class="page-header">
                    <h1 class="page-title">ğŸ° å•†å“ç®¡ç†</h1>
                    <p>å•†å“æƒ…å ±ã®è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ãŒã§ãã¾ã™</p>
                </div>

                <div class="content-card">
                    <div class="card-header">
                        <h3>å•†å“ä¸€è¦§</h3>
                        <button class="btn-primary" onclick="openProductModal()">
                            <i class="fas fa-plus"></i> æ–°è¦å•†å“
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="products-list">
                            <p>å•†å“æƒ…å ±ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ã‚®ãƒ•ãƒˆç®¡ç† -->
            <section id="gifts" class="section">
                <div class="page-header">
                    <h1 class="page-title">ğŸ ã‚®ãƒ•ãƒˆç®¡ç†</h1>
                    <p>ã‚®ãƒ•ãƒˆå•†å“ã®è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ãŒã§ãã¾ã™</p>
                </div>

                <div class="content-card">
                    <div class="card-header">
                        <h3>ã‚®ãƒ•ãƒˆä¸€è¦§</h3>
                        <button class="btn-primary" onclick="openGiftModal()">
                            <i class="fas fa-plus"></i> æ–°è¦ã‚®ãƒ•ãƒˆ
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="gifts-list">
                            <p>ã‚®ãƒ•ãƒˆæƒ…å ±ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ãŠå®¢æ§˜ã®å£°ç®¡ç† -->
            <section id="reviews" class="section">
                <div class="page-header">
                    <h1 class="page-title">â­ ãŠå®¢æ§˜ã®å£°ç®¡ç†</h1>
                    <p>ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ãŒã§ãã¾ã™</p>
                </div>

                <div class="content-card">
                    <div class="card-header">
                        <h3>ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸€è¦§</h3>
                        <button class="btn-primary" onclick="openReviewModal()">
                            <i class="fas fa-plus"></i> æ–°è¦ãƒ¬ãƒ“ãƒ¥ãƒ¼
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="reviews-list">
                            <p>ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ã‚µã‚¤ãƒˆè¨­å®š -->
            <section id="settings" class="section">
                <div class="page-header">
                    <h1 class="page-title">âš™ï¸ ã‚µã‚¤ãƒˆè¨­å®š</h1>
                    <p>ã‚µã‚¤ãƒˆå…¨ä½“ã®è¨­å®šã‚’ç®¡ç†ã§ãã¾ã™</p>
                </div>

                <div class="content-card">
                    <div class="card-header">
                        <h3>åŸºæœ¬è¨­å®š</h3>
                    </div>
                    <div class="card-body">
                        <form id="settings-form">
                            <div class="form-group">
                                <label>ã‚µã‚¤ãƒˆå</label>
                                <input type="text" id="site-name" class="form-control" placeholder="å’Œç²‹ WASUI">
                            </div>

                            <div class="form-group">
                                <label>é›»è©±ç•ªå·</label>
                                <input type="text" id="site-phone" class="form-control" placeholder="03-1234-5678">
                            </div>

                            <div class="form-group">
                                <label>ä½æ‰€</label>
                                <input type="text" id="site-address" class="form-control" placeholder="ã€’123-4567 æ±äº¬éƒ½...">
                            </div>

                            <div class="form-group">
                                <label>å–¶æ¥­æ™‚é–“</label>
                                <input type="text" id="site-hours" class="form-control" placeholder="9:00ã€œ19:00ï¼ˆæ°´æ›œå®šä¼‘ï¼‰">
                            </div>

                            <div class="form-group">
                                <label>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                                <input type="email" id="site-email" class="form-control" placeholder="info@wasui.com">
                            </div>

                            <div class="form-group">
                                <label>ã‚µã‚¤ãƒˆèª¬æ˜</label>
                                <textarea id="site-description" class="form-control" rows="3" placeholder="å’Œç²‹ã¯ä¼çµ±ã®æŠ€ã¨å¿ƒã‚’è¾¼ã‚ãŸãƒã‚¦ãƒ ã‚¯ãƒ¼ãƒ˜ãƒ³å°‚é–€åº—ã§ã™..."></textarea>
                                <div class="help-text">ã‚µã‚¤ãƒˆã®ãƒ¡ã‚¿ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã‚„ç´¹ä»‹æ–‡ã«ä½¿ç”¨ã•ã‚Œã¾ã™</div>
                            </div>

                            <div class="form-group">
                                <label>SNSãƒªãƒ³ã‚¯</label>
                                <div class="form-row">
                                    <div class="form-group">
                                        <input type="url" id="site-facebook" class="form-control" placeholder="Facebook URL">
                                    </div>
                                    <div class="form-group">
                                        <input type="url" id="site-instagram" class="form-control" placeholder="Instagram URL">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <input type="url" id="site-twitter" class="form-control" placeholder="Twitter URL">
                                    </div>
                                    <div class="form-group">
                                        <input type="url" id="site-line" class="form-control" placeholder="LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ URL">
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>é…é€ãƒ»æ”¯æ‰•ã„æƒ…å ±</label>
                                <textarea id="site-shipping" class="form-control" rows="3" placeholder="é…é€æ–™ï¼šå…¨å›½ä¸€å¾‹500å††ï¼ˆ5,000å††ä»¥ä¸Šé€æ–™ç„¡æ–™ï¼‰&#10;æ”¯æ‰•æ–¹æ³•ï¼šã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã€éŠ€è¡ŒæŒ¯è¾¼ã€ä»£é‡‘å¼•æ›"></textarea>
                                <div class="help-text">é…é€ã¨æ”¯æ‰•ã„ã«é–¢ã™ã‚‹åŸºæœ¬æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
                            </div>

                            <div class="form-group">
                                <label>ç‰¹åˆ¥ãªãŠçŸ¥ã‚‰ã›</label>
                                <textarea id="site-notice" class="form-control" rows="2" placeholder="å¹´æœ«å¹´å§‹ã¯12æœˆ30æ—¥ã€œ1æœˆ3æ—¥ã¾ã§ä¼‘æ¥­ã„ãŸã—ã¾ã™"></textarea>
                                <div class="help-text">ã‚µã‚¤ãƒˆå…¨ä½“ã«è¡¨ç¤ºã™ã‚‹é‡è¦ãªãŠçŸ¥ã‚‰ã›ãŒã‚ã‚Œã°å…¥åŠ›ã—ã¦ãã ã•ã„</div>
                            </div>

                            <div style="margin-top: 30px;">
                                <button type="submit" class="btn-primary">è¨­å®šã‚’ä¿å­˜</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ -->
                <div class="content-card">
                    <div class="card-header">
                        <h3>ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</h3>
                    </div>
                    <div class="card-body">
                        <p>CMSãƒ‡ãƒ¼ã‚¿ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚µã‚¤ãƒˆã§åˆ©ç”¨ã§ãã¾ã™ã€‚</p>
                        <div style="margin-top: 20px;">
                            <button type="button" class="btn-primary" onclick="exportAllData()">
                                <i class="fas fa-download"></i> å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
                            </button>
                            <small style="display: block; margin-top: 10px; color: #666;">
                                ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸJSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’<code>/public/data/</code>ãƒ•ã‚©ãƒ«ãƒ€ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚
                            </small>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- ãƒ¢ãƒ¼ãƒ€ãƒ«: ãŠçŸ¥ã‚‰ã› -->
    <div id="news-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h4 id="news-modal-title">æ–°è¦ãŠçŸ¥ã‚‰ã›</h4>
                <span class="close" onclick="closeNewsModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="news-form">
                    <div class="form-group">
                        <label>ã‚¿ã‚¤ãƒˆãƒ« <i class="fas fa-question-circle help-icon"></i></label>
                        <input type="text" id="news-title" class="form-control" placeholder="ä¾‹ï¼šæ–°å•†å“ã€ŒæŠ¹èŒ¶ãƒã‚¦ãƒ ã‚¯ãƒ¼ãƒ˜ãƒ³ã€ç™ºå£²é–‹å§‹" required>
                        <div class="help-text">ãŠå®¢æ§˜ã«ã‚ã‹ã‚Šã‚„ã™ã„ç°¡æ½”ãªã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
                    </div>

                    <div class="form-group">
                        <label>ã‚«ãƒ†ã‚´ãƒª <i class="fas fa-question-circle help-icon"></i></label>
                        <select id="news-category" class="form-control" required>
                            <option value="">ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ</option>
                            <option value="æ–°å•†å“">æ–°å•†å“</option>
                            <option value="ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³">ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³</option>
                            <option value="ãŠçŸ¥ã‚‰ã›">ãŠçŸ¥ã‚‰ã›</option>
                            <option value="ã‚¤ãƒ™ãƒ³ãƒˆ">ã‚¤ãƒ™ãƒ³ãƒˆ</option>
                            <option value="é‡è¦">é‡è¦ãªãŠçŸ¥ã‚‰ã›</option>
                        </select>
                        <div class="help-text">ãŠçŸ¥ã‚‰ã›ã®ç¨®é¡ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label>å…¬é–‹æ—¥ <i class="fas fa-question-circle help-icon"></i></label>
                            <input type="date" id="news-date" class="form-control" required>
                            <div class="help-text">ãŠçŸ¥ã‚‰ã›ã®å…¬é–‹æ—¥ã‚’è¨­å®šã—ã¦ãã ã•ã„</div>
                        </div>

                        <div class="form-group">
                            <label>å„ªå…ˆåº¦ <i class="fas fa-question-circle help-icon"></i></label>
                            <select id="news-priority" class="form-control">
                                <option value="normal">é€šå¸¸</option>
                                <option value="high">é«˜</option>
                                <option value="urgent">ç·Šæ€¥</option>
                            </select>
                            <div class="help-text">è¡¨ç¤ºå„ªå…ˆåº¦ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>æ¦‚è¦ <i class="fas fa-question-circle help-icon"></i></label>
                        <textarea id="news-summary" class="form-control" rows="3" placeholder="ãŠçŸ¥ã‚‰ã›ã®æ¦‚è¦ã‚’ç°¡æ½”ã«èª¬æ˜ã—ã¦ãã ã•ã„" required></textarea>
                        <div class="help-text">ä¸€è¦§è¡¨ç¤ºã§ä½¿ç”¨ã•ã‚Œã‚‹çŸ­ã„èª¬æ˜æ–‡ã§ã™ï¼ˆ100æ–‡å­—ç¨‹åº¦ï¼‰</div>
                    </div>

                    <div class="form-group">
                        <label>è©³ç´°å†…å®¹ <i class="fas fa-question-circle help-icon"></i></label>
                        <textarea id="news-content" class="form-control" rows="6" placeholder="ãŠçŸ¥ã‚‰ã›ã®è©³ç´°å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"></textarea>
                        <div class="help-text">è©³ç´°ãƒšãƒ¼ã‚¸ã§è¡¨ç¤ºã•ã‚Œã‚‹æœ¬æ–‡ã§ã™</div>
                    </div>

                    <div class="form-group">
                        <label>ãŠçŸ¥ã‚‰ã›ç”»åƒ <i class="fas fa-question-circle help-icon"></i></label>
                        <div class="file-upload-container">
                            <input type="file" id="news-image-file" accept="image/*" onchange="handleImageUpload(this, 'news-image-preview')" style="display: none;">
                            <button type="button" onclick="document.getElementById('news-image-file').click()" class="file-upload-btn">
                                ğŸ“¸ ç”»åƒã‚’é¸æŠï¼ˆ2MBä»¥ä¸‹ï¼‰
                            </button>
                            <div id="news-image-preview" class="image-preview"></div>
                            <input type="hidden" id="news-image" name="news-image">
                        </div>
                        <div class="help-text">ãŠçŸ¥ã‚‰ã›ã«æ·»ä»˜ã™ã‚‹ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ï¼ˆJPG, PNGå½¢å¼ã€2MBä»¥ä¸‹ï¼‰</div>
                    </div>

                    <div class="form-group">
                        <label>ã‚¿ã‚° <i class="fas fa-question-circle help-icon"></i></label>
                        <input type="text" id="news-tags" class="form-control" placeholder="ä¾‹ï¼šæ–°å•†å“,ãƒã‚¦ãƒ ã‚¯ãƒ¼ãƒ˜ãƒ³,é™å®š">
                        <div class="help-text">æ¤œç´¢ç”¨ã®ã‚¿ã‚°ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§å…¥åŠ›ã—ã¦ãã ã•ã„</div>
                    </div>

                    <div style="display: flex; gap: 20px; align-items: center; margin-top: 20px;">
                        <label>
                            <input type="checkbox" id="news-featured"> æ³¨ç›®è¨˜äº‹ã¨ã—ã¦è¡¨ç¤º
                        </label>
                        <label>
                            <input type="checkbox" id="news-active" checked> å…¬é–‹ã™ã‚‹
                        </label>
                    </div>

                    <div style="margin-top: 30px; display: flex; gap: 10px; justify-content: flex-end;">
                        <button type="button" class="btn btn-secondary" onclick="closeNewsModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                        <button type="submit" class="btn btn-primary">ä¿å­˜</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- å•†å“ç®¡ç†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="product-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="product-modal-title">æ–°è¦å•†å“ç™»éŒ²</h3>
                <span class="close" onclick="closeProductModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="product-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label>å•†å“å <span class="required">*</span></label>
                            <input type="text" id="product-title" class="form-control" placeholder="ä¾‹ï¼šç‰¹é¸ãƒã‚¦ãƒ ã‚¯ãƒ¼ãƒ˜ãƒ³" required>
                            <div class="help-text">å•†å“ã®æ­£å¼åç§°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
                        </div>
                        <div class="form-group">
                            <label>ã‚«ãƒ†ã‚´ãƒª <span class="required">*</span></label>
                            <select id="product-category" class="form-control" required>
                                <option value="">ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ</option>
                                <option value="ãƒã‚¦ãƒ ã‚¯ãƒ¼ãƒ˜ãƒ³">ãƒã‚¦ãƒ ã‚¯ãƒ¼ãƒ˜ãƒ³</option>
                                <option value="å­£ç¯€é™å®šå“">å­£ç¯€é™å®šå“</option>
                                <option value="ã‚®ãƒ•ãƒˆã‚»ãƒƒãƒˆ">ã‚®ãƒ•ãƒˆã‚»ãƒƒãƒˆ</option>
                                <option value="ç„¼è“å­">ç„¼è“å­</option>
                                <option value="ãã®ä»–">ãã®ä»–</option>
                            </select>
                            <div class="help-text">å•†å“ã®ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠã—ã¦ãã ã•ã„</div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>ä¾¡æ ¼ <span class="required">*</span></label>
                            <input type="text" id="product-price" class="form-control" placeholder="ä¾‹ï¼š1,500å††" required>
                            <div class="help-text">ç¨è¾¼ä¾¡æ ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
                        </div>
                        <div class="form-group">
                            <label>è²©å£²é–‹å§‹æ—¥</label>
                            <input type="date" id="product-date" class="form-control">
                            <div class="help-text">å•†å“ã®è²©å£²é–‹å§‹æ—¥ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>å•†å“èª¬æ˜ <span class="required">*</span></label>
                        <textarea id="product-description" class="form-control" rows="4" placeholder="å•†å“ã®è©³ç´°ãªèª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" required></textarea>
                        <div class="help-text">å•†å“ã®ç‰¹å¾´ã‚„é­…åŠ›ã‚’è©³ã—ãèª¬æ˜ã—ã¦ãã ã•ã„</div>
                    </div>

                    <div class="form-group">
                        <label>åŸææ–™ãƒ»ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æƒ…å ±</label>
                        <textarea id="product-ingredients" class="form-control" rows="3" placeholder="ä¾‹ï¼šå°éº¦ç²‰ã€åµã€ãƒã‚¿ãƒ¼ã€ç ‚ç³–ï¼ˆç‰¹å®šåŸææ–™ï¼šå°éº¦ã€åµã€ä¹³ï¼‰"></textarea>
                        <div class="help-text">åŸææ–™ã¨ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æƒ…å ±ã‚’è¨˜è¼‰ã—ã¦ãã ã•ã„</div>
                    </div>

                    <div class="form-group">
                        <label>å•†å“ç”»åƒ</label>
                        <div class="file-upload-container">
                            <input type="file" id="product-image-file" accept="image/*" onchange="handleImageUpload(this, 'product-image-preview')" style="display: none;">
                            <button type="button" onclick="document.getElementById('product-image-file').click()" class="file-upload-btn">
                                ğŸ“¸ ç”»åƒã‚’é¸æŠï¼ˆ2MBä»¥ä¸‹ï¼‰
                            </button>
                            <div id="product-image-preview" class="image-preview"></div>
                            <input type="hidden" id="product-image" name="product-image">
                        </div>
                        <div class="help-text">å•†å“ã®ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ï¼ˆJPG, PNGå½¢å¼ã€2MBä»¥ä¸‹ï¼‰</div>
                    </div>

                    <div class="form-group">
                        <label>æ¤œç´¢ã‚¿ã‚°</label>
                        <input type="text" id="product-tags" class="form-control" placeholder="ä¾‹ï¼šãƒã‚¦ãƒ ,äººæ°—,ã‚®ãƒ•ãƒˆ">
                        <div class="help-text">æ¤œç´¢ç”¨ã®ã‚¿ã‚°ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§å…¥åŠ›ã—ã¦ãã ã•ã„</div>
                    </div>

                    <div style="display: flex; gap: 20px; align-items: center; margin-top: 20px;">
                        <label>
                            <input type="checkbox" id="product-featured"> ãŠã™ã™ã‚å•†å“ã¨ã—ã¦è¡¨ç¤º
                        </label>
                        <label>
                            <input type="checkbox" id="product-active" checked> è²©å£²ä¸­
                        </label>
                    </div>

                    <div style="margin-top: 30px; display: flex; gap: 10px; justify-content: flex-end;">
                        <button type="button" class="btn btn-secondary" onclick="closeProductModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                        <button type="submit" class="btn btn-primary">ä¿å­˜</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ã‚®ãƒ•ãƒˆç®¡ç†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="gift-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="gift-modal-title">æ–°è¦ã‚®ãƒ•ãƒˆç™»éŒ²</h3>
                <span class="close" onclick="closeGiftModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="gift-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label>ã‚®ãƒ•ãƒˆå <span class="required">*</span></label>
                            <input type="text" id="gift-title" class="form-control" placeholder="ä¾‹ï¼šå­£ç¯€ã®ã‚®ãƒ•ãƒˆã‚»ãƒƒãƒˆ" required>
                            <div class="help-text">ã‚®ãƒ•ãƒˆã®æ­£å¼åç§°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
                        </div>
                        <div class="form-group">
                            <label>ã‚®ãƒ•ãƒˆã‚¿ã‚¤ãƒ— <span class="required">*</span></label>
                            <select id="gift-type" class="form-control" required>
                                <option value="">ã‚¿ã‚¤ãƒ—ã‚’é¸æŠ</option>
                                <option value="è©°åˆã›">è©°åˆã›</option>
                                <option value="ã‚®ãƒ•ãƒˆãƒœãƒƒã‚¯ã‚¹">ã‚®ãƒ•ãƒˆãƒœãƒƒã‚¯ã‚¹</option>
                                <option value="å­£ç¯€é™å®š">å­£ç¯€é™å®š</option>
                                <option value="ã®ã—å¯¾å¿œ">ã®ã—å¯¾å¿œ</option>
                                <option value="ã‚«ã‚¹ã‚¿ãƒ ã‚®ãƒ•ãƒˆ">ã‚«ã‚¹ã‚¿ãƒ ã‚®ãƒ•ãƒˆ</option>
                            </select>
                            <div class="help-text">ã‚®ãƒ•ãƒˆã®ã‚¿ã‚¤ãƒ—ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>ä¾¡æ ¼ <span class="required">*</span></label>
                            <input type="text" id="gift-price" class="form-control" placeholder="ä¾‹ï¼š3,000å††ã€œ" required>
                            <div class="help-text">ã‚®ãƒ•ãƒˆã®ä¾¡æ ¼å¸¯ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
                        </div>
                        <div class="form-group">
                            <label>è²©å£²é–‹å§‹æ—¥</label>
                            <input type="date" id="gift-date" class="form-control">
                            <div class="help-text">ã‚®ãƒ•ãƒˆã®è²©å£²é–‹å§‹æ—¥ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>ã‚®ãƒ•ãƒˆå†…å®¹ <span class="required">*</span></label>
                        <textarea id="gift-contents" class="form-control" rows="4" placeholder="ã‚®ãƒ•ãƒˆã«å«ã¾ã‚Œã‚‹å•†å“ã‚„å†…å®¹ã‚’è©³ã—ãèª¬æ˜ã—ã¦ãã ã•ã„" required></textarea>
                        <div class="help-text">ã‚®ãƒ•ãƒˆã®å†…å®¹ã‚’è©³ã—ãèª¬æ˜ã—ã¦ãã ã•ã„</div>
                    </div>

                    <div class="form-group">
                        <label>ã‚®ãƒ•ãƒˆèª¬æ˜</label>
                        <textarea id="gift-description" class="form-control" rows="3" placeholder="ã‚®ãƒ•ãƒˆã®ç‰¹å¾´ã‚„è´ˆã‚Šç‰©ã¨ã—ã¦ã®é­…åŠ›ã‚’èª¬æ˜ã—ã¦ãã ã•ã„"></textarea>
                        <div class="help-text">ã‚®ãƒ•ãƒˆã®ç‰¹å¾´ã‚„é­…åŠ›ã‚’èª¬æ˜ã—ã¦ãã ã•ã„</div>
                    </div>

                    <div class="form-group">
                        <label>ã®ã—ãƒ»åŒ…è£…å¯¾å¿œ</label>
                        <div class="checkbox-group">
                            <label><input type="checkbox" id="gift-noshi"> ã®ã—å¯¾å¿œå¯èƒ½</label>
                            <label><input type="checkbox" id="gift-wrapping"> åŒ…è£…å¯¾å¿œå¯èƒ½</label>
                            <label><input type="checkbox" id="gift-message"> ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚«ãƒ¼ãƒ‰å¯¾å¿œ</label>
                        </div>
                        <div class="help-text">å¯¾å¿œå¯èƒ½ãªã‚µãƒ¼ãƒ“ã‚¹ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
                    </div>

                    <div class="form-group">
                        <label>ã‚®ãƒ•ãƒˆç”»åƒ</label>
                        <div class="file-upload-container">
                            <input type="file" id="gift-image-file" accept="image/*" onchange="handleImageUpload(this, 'gift-image-preview')" style="display: none;">
                            <button type="button" onclick="document.getElementById('gift-image-file').click()" class="file-upload-btn">
                                ğŸ“¸ ç”»åƒã‚’é¸æŠï¼ˆ2MBä»¥ä¸‹ï¼‰
                            </button>
                            <div id="gift-image-preview" class="image-preview"></div>
                            <input type="hidden" id="gift-image" name="gift-image">
                        </div>
                        <div class="help-text">ã‚®ãƒ•ãƒˆã®ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ï¼ˆJPG, PNGå½¢å¼ã€2MBä»¥ä¸‹ï¼‰</div>
                    </div>

                    <div class="form-group">
                        <label>æ¤œç´¢ã‚¿ã‚°</label>
                        <input type="text" id="gift-tags" class="form-control" placeholder="ä¾‹ï¼šã‚®ãƒ•ãƒˆ,ãŠç¥ã„,å­£ç¯€">
                        <div class="help-text">æ¤œç´¢ç”¨ã®ã‚¿ã‚°ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§å…¥åŠ›ã—ã¦ãã ã•ã„</div>
                    </div>

                    <div style="display: flex; gap: 20px; align-items: center; margin-top: 20px;">
                        <label>
                            <input type="checkbox" id="gift-featured"> ãŠã™ã™ã‚ã‚®ãƒ•ãƒˆã¨ã—ã¦è¡¨ç¤º
                        </label>
                        <label>
                            <input type="checkbox" id="gift-active" checked> è²©å£²ä¸­
                        </label>
                    </div>

                    <div style="margin-top: 30px; display: flex; gap: 10px; justify-content: flex-end;">
                        <button type="button" class="btn btn-secondary" onclick="closeGiftModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                        <button type="submit" class="btn btn-primary">ä¿å­˜</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ãŠå®¢æ§˜ã®å£°ç®¡ç†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="review-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="review-modal-title">æ–°è¦ãŠå®¢æ§˜ã®å£°ç™»éŒ²</h3>
                <span class="close" onclick="closeReviewModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="review-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label>ãŠå®¢æ§˜å <span class="required">*</span></label>
                            <input type="text" id="review-customer-name" class="form-control" placeholder="ä¾‹ï¼šç”°ä¸­æ§˜" required>
                            <div class="help-text">ãŠå®¢æ§˜ã®ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
                        </div>
                        <div class="form-group">
                            <label>è©•ä¾¡ <span class="required">*</span></label>
                            <select id="review-rating" class="form-control" required>
                                <option value="">è©•ä¾¡ã‚’é¸æŠ</option>
                                <option value="5">â˜…â˜…â˜…â˜…â˜… (5ã¤æ˜Ÿ)</option>
                                <option value="4">â˜…â˜…â˜…â˜…â˜† (4ã¤æ˜Ÿ)</option>
                                <option value="3">â˜…â˜…â˜…â˜†â˜† (3ã¤æ˜Ÿ)</option>
                                <option value="2">â˜…â˜…â˜†â˜†â˜† (2ã¤æ˜Ÿ)</option>
                                <option value="1">â˜…â˜†â˜†â˜†â˜† (1ã¤æ˜Ÿ)</option>
                            </select>
                            <div class="help-text">ãŠå®¢æ§˜ã®è©•ä¾¡ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>è³¼å…¥å•†å“</label>
                            <input type="text" id="review-product" class="form-control" placeholder="ä¾‹ï¼šç‰¹é¸ãƒã‚¦ãƒ ã‚¯ãƒ¼ãƒ˜ãƒ³">
                            <div class="help-text">è³¼å…¥ã•ã‚ŒãŸå•†å“åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
                        </div>
                        <div class="form-group">
                            <label>æŠ•ç¨¿æ—¥</label>
                            <input type="date" id="review-date" class="form-control">
                            <div class="help-text">ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æŠ•ç¨¿æ—¥ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>ãŠå®¢æ§˜ã®å£° <span class="required">*</span></label>
                        <textarea id="review-content" class="form-control" rows="4" placeholder="ãŠå®¢æ§˜ã‹ã‚‰ã„ãŸã ã„ãŸæ„Ÿæƒ³ã‚„ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" required></textarea>
                        <div class="help-text">ãŠå®¢æ§˜ã®æ„Ÿæƒ³ã‚’è©³ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„</div>
                    </div>

                    <div class="form-group">
                        <label>ãŠå®¢æ§˜æƒ…å ±</label>
                        <div class="form-row">
                            <div class="form-group">
                                <input type="text" id="review-age" class="form-control" placeholder="å¹´ä»£ï¼ˆä¾‹ï¼š30ä»£ï¼‰">
                            </div>
                            <div class="form-group">
                                <select id="review-gender" class="form-control">
                                    <option value="">æ€§åˆ¥ã‚’é¸æŠ</option>
                                    <option value="ç”·æ€§">ç”·æ€§</option>
                                    <option value="å¥³æ€§">å¥³æ€§</option>
                                    <option value="ãã®ä»–">ãã®ä»–</option>
                                </select>
                            </div>
                        </div>
                        <div class="help-text">ãŠå®¢æ§˜ã®å¹´ä»£ã¨æ€§åˆ¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä»»æ„ï¼‰</div>
                    </div>

                    <div class="form-group">
                        <label>ãŠå®¢æ§˜å†™çœŸ</label>
                        <div class="file-upload-container">
                            <input type="file" id="review-image-file" accept="image/*" onchange="handleImageUpload(this, 'review-image-preview')" style="display: none;">
                            <button type="button" onclick="document.getElementById('review-image-file').click()" class="file-upload-btn">
                                ğŸ“¸ ç”»åƒã‚’é¸æŠï¼ˆ2MBä»¥ä¸‹ï¼‰
                            </button>
                            <div id="review-image-preview" class="image-preview"></div>
                            <input type="hidden" id="review-image" name="review-image">
                        </div>
                        <div class="help-text">ãŠå®¢æ§˜ã®å†™çœŸã‚„å•†å“ã®å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ï¼ˆJPG, PNGå½¢å¼ã€2MBä»¥ä¸‹ï¼‰</div>
                    </div>

                    <div class="form-group">
                        <label>ã‚¿ã‚°</label>
                        <input type="text" id="review-tags" class="form-control" placeholder="ä¾‹ï¼šãƒªãƒ”ãƒ¼ã‚¿ãƒ¼,ã‚®ãƒ•ãƒˆ,ãŠç¥ã„">
                        <div class="help-text">æ¤œç´¢ç”¨ã®ã‚¿ã‚°ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§å…¥åŠ›ã—ã¦ãã ã•ã„</div>
                    </div>

                    <div style="display: flex; gap: 20px; align-items: center; margin-top: 20px;">
                        <label>
                            <input type="checkbox" id="review-featured"> ãŠã™ã™ã‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ã—ã¦è¡¨ç¤º
                        </label>
                        <label>
                            <input type="checkbox" id="review-active" checked> å…¬é–‹ã™ã‚‹
                        </label>
                    </div>

                    <div style="margin-top: 30px; display: flex; gap: 10px; justify-content: flex-end;">
                        <button type="button" class="btn btn-secondary" onclick="closeReviewModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                        <button type="submit" class="btn btn-primary">ä¿å­˜</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- é€šçŸ¥ -->
    <div id="notification" class="notification"></div>

    <script>
        // ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ åŸºæœ¬æ©Ÿèƒ½
        let currentData = null;
        let isAuthenticated = false;
        let currentUser = null;

        // èªè¨¼æƒ…å ±
        const validCredentials = {
            'wasui_admin': 'wasui2024'
        };

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeWasuiAdmin();
        });

        function initializeWasuiAdmin() {
            checkAuthentication();
            setupEventListeners();
            loadData();
        }

        function checkAuthentication() {
            const authData = localStorage.getItem('wasui_auth');
            if (authData) {
                try {
                    const auth = JSON.parse(authData);
                    if (auth.expiry > Date.now()) {
                        isAuthenticated = true;
                        currentUser = auth.username;
                        showDashboard();
                        return;
                    }
                } catch (error) {
                    console.error('Auth check error:', error);
                }
            }
            showLogin();
        }

        function setupEventListeners() {
            // ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ 
            document.getElementById('login-form').addEventListener('submit', function(e) {
                e.preventDefault();
                login();
            });

            // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.dataset.section;
                    if (section) {
                        showSection(section);
                    }
                });
            });

            // ã‚µã‚¤ãƒˆè¨­å®šãƒ•ã‚©ãƒ¼ãƒ 
            document.getElementById('settings-form').addEventListener('submit', function(e) {
                e.preventDefault();
                saveSettings();
            });

            // ãŠçŸ¥ã‚‰ã›ãƒ•ã‚©ãƒ¼ãƒ 
            document.getElementById('news-form').addEventListener('submit', function(e) {
                e.preventDefault();
                saveNews();
            });

            // å•†å“ãƒ•ã‚©ãƒ¼ãƒ 
            document.getElementById('product-form').addEventListener('submit', function(e) {
                e.preventDefault();
                saveProduct();
            });

            // ã‚®ãƒ•ãƒˆãƒ•ã‚©ãƒ¼ãƒ 
            document.getElementById('gift-form').addEventListener('submit', function(e) {
                e.preventDefault();
                saveGift();
            });

            // ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ 
            document.getElementById('review-form').addEventListener('submit', function(e) {
                e.preventDefault();
                saveReview();
            });
        }

        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (validCredentials[username] === password) {
                const authData = {
                    username: username,
                    expiry: Date.now() + (24 * 60 * 60 * 1000) // 24æ™‚é–“
                };
                localStorage.setItem('wasui_auth', JSON.stringify(authData));

                isAuthenticated = true;
                currentUser = username;
                showDashboard();
                showNotification('ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸ', 'success');
            } else {
                showNotification('ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“', 'error');
            }
        }

        function logout() {
            localStorage.removeItem('wasui_auth');
            isAuthenticated = false;
            currentUser = null;
            showLogin();
            showNotification('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ', 'success');
        }

        function showLogin() {
            document.getElementById('login-container').style.display = 'flex';
            document.getElementById('admin-container').style.display = 'none';
        }

        function showDashboard() {
            document.getElementById('login-container').style.display = 'none';
            document.getElementById('admin-container').style.display = 'flex';
            updateDashboardStats();
        }

        function showSection(sectionName) {
            // ã™ã¹ã¦ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’éè¡¨ç¤º
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });

            // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹æ›´æ–°
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });

            // é¸æŠã•ã‚ŒãŸã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º
            const targetSection = document.getElementById(sectionName);
            if (targetSection) {
                targetSection.classList.add('active');
            }

            // å¯¾å¿œã™ã‚‹ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
            const targetMenuItem = document.querySelector(`[data-section="${sectionName}"]`);
            if (targetMenuItem) {
                targetMenuItem.classList.add('active');
            }

            // ã‚»ã‚¯ã‚·ãƒ§ãƒ³å›ºæœ‰ã®å‡¦ç†
            if (sectionName === 'news') {
                renderNews();
            } else if (sectionName === 'products') {
                renderProducts();
            } else if (sectionName === 'gifts') {
                renderGifts();
            } else if (sectionName === 'reviews') {
                renderReviews();
            } else if (sectionName === 'settings') {
                loadSettings();
            }
        }

        function loadData() {
            try {
                const savedData = localStorage.getItem('wasui_data');
                if (savedData) {
                    currentData = JSON.parse(savedData);
                } else {
                    currentData = getDefaultData();
                }
                updateDashboardStats();
            } catch (error) {
                console.error('ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
                currentData = getDefaultData();
            }
        }

        function getDefaultData() {
            return {
                news: [],
                products: [],
                gifts: [],
                reviews: [],
                settings: {
                    siteName: "å’Œç²‹ WASUI",
                    phone: "",
                    address: "",
                    hours: "",
                    email: "",
                    lastUpdated: new Date().toISOString()
                }
            };
        }

        function updateDashboardStats() {
            if (!currentData) return;

            document.getElementById('stats-news').textContent = currentData.news?.length || 0;
            document.getElementById('stats-products').textContent = currentData.products?.length || 0;
            document.getElementById('stats-gifts').textContent = currentData.gifts?.length || 0;
            document.getElementById('stats-reviews').textContent = currentData.reviews?.length || 0;
        }

        function saveData() {
            localStorage.setItem('wasui_data', JSON.stringify(currentData));

            // å€‹åˆ¥ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‡ºåŠ›ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç”¨ï¼‰
            exportDataToJSON();
            updateDashboardStats();
        }

        // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ï¼ˆå…¨ä½“ã§ä½¿ç”¨ï¼‰
        function formatDate(dateString) {
            if (!dateString) return 'æ—¥ä»˜æœªè¨­å®š';
            const date = new Date(dateString);
            return `${date.getFullYear()}.${String(date.getMonth() + 1).padStart(2, '0')}.${String(date.getDate()).padStart(2, '0')}`;
        }

        function getProductCategoryClass(category) {
            const classes = {
                'ãƒã‚¦ãƒ ã‚¯ãƒ¼ãƒ˜ãƒ³': 'category-baum',
                'å­£ç¯€é™å®šå“': 'category-seasonal',
                'ã‚®ãƒ•ãƒˆã‚»ãƒƒãƒˆ': 'category-gift',
                'ç„¼è“å­': 'category-baked',
                'ãã®ä»–': 'category-other'
            };
            return classes[category] || 'category-default';
        }

        function getGiftTypeClass(type) {
            const classes = {
                'è©°åˆã›': 'type-assortment',
                'ã‚®ãƒ•ãƒˆãƒœãƒƒã‚¯ã‚¹': 'type-box',
                'å­£ç¯€é™å®š': 'type-seasonal',
                'ã®ã—å¯¾å¿œ': 'type-noshi',
                'ã‚«ã‚¹ã‚¿ãƒ ã‚®ãƒ•ãƒˆ': 'type-custom'
            };
            return classes[type] || 'type-default';
        }

        function getStarRating(rating) {
            if (!rating) return 'è©•ä¾¡ãªã—';
            return 'â˜…'.repeat(rating) + 'â˜†'.repeat(5 - rating);
        }

        // JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é€£æºç”¨ï¼‰
        function exportDataToJSON() {
            // å€‹åˆ¥ã®JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆ
            const exports = {
                news: currentData.news || [],
                products: currentData.products || [],
                gifts: currentData.gifts || [],
                reviews: currentData.reviews || [],
                settings: currentData.settings || {}
            };

            // å„ãƒ‡ãƒ¼ã‚¿ã‚¿ã‚¤ãƒ—ã®JSONã‚’ç”Ÿæˆ
            Object.keys(exports).forEach(key => {
                const jsonString = JSON.stringify(exports[key], null, 2);
                downloadJSON(jsonString, `wasui_${key}.json`);
            });

            // çµ±åˆãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ç”Ÿæˆ
            const allData = JSON.stringify(exports, null, 2);
            downloadJSON(allData, 'wasui_all_data.json');
        }

        // JSONãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
        function downloadJSON(jsonString, filename) {
            const blob = new Blob([jsonString], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.style.display = 'none';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³æ©Ÿèƒ½
        function exportAllData() {
            if (!currentData || Object.keys(currentData).length === 0) {
                showNotification('ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“', 'error');
                return;
            }

            exportDataToJSON();
            showNotification('ãƒ‡ãƒ¼ã‚¿ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ', 'success');
        }

        // ãŠçŸ¥ã‚‰ã›é–¢é€£
        function openNewsModal(newsId = null) {
            const modal = document.getElementById('news-modal');
            const title = document.getElementById('news-modal-title');

            if (newsId) {
                title.textContent = 'ãŠçŸ¥ã‚‰ã›ç·¨é›†';
                const news = currentData.news.find(n => n.id === newsId);
                if (news) {
                    document.getElementById('news-title').value = news.title || '';
                    document.getElementById('news-category').value = news.category || '';
                    document.getElementById('news-date').value = news.date || '';
                    document.getElementById('news-priority').value = news.priority || 'normal';
                    document.getElementById('news-summary').value = news.summary || '';
                    document.getElementById('news-content').value = news.content || '';
                    document.getElementById('news-tags').value = news.tags || '';
                    document.getElementById('news-featured').checked = news.featured || false;
                    document.getElementById('news-active').checked = news.active !== false;

                    if (news.image) {
                        document.getElementById('news-image-preview').innerHTML = `
                            <div class="image-preview-container">
                                <img src="${getImageUrl(news.image)}" alt="ç¾åœ¨ã®ç”»åƒ" style="max-width: 200px; max-height: 150px; border-radius: 8px;">
                                <p style="margin-top: 5px; font-size: 12px; color: #666;">ç¾åœ¨ã®ç”»åƒ</p>
                            </div>
                        `;
                        document.getElementById('news-image').value = news.image;
                    }
                }
            } else {
                title.textContent = 'æ–°è¦ãŠçŸ¥ã‚‰ã›';
                document.getElementById('news-form').reset();
                document.getElementById('news-image-preview').innerHTML = '';
                document.getElementById('news-date').value = new Date().toISOString().split('T')[0];
                document.getElementById('news-active').checked = true;
            }

            modal.style.display = 'block';
        }

        function closeNewsModal() {
            document.getElementById('news-modal').style.display = 'none';
        }

        function saveNews() {
            const formData = {
                title: document.getElementById('news-title').value,
                category: document.getElementById('news-category').value,
                date: document.getElementById('news-date').value,
                priority: document.getElementById('news-priority').value,
                summary: document.getElementById('news-summary').value,
                content: document.getElementById('news-content').value,
                image: document.getElementById('news-image').value,
                tags: document.getElementById('news-tags').value,
                featured: document.getElementById('news-featured').checked,
                active: document.getElementById('news-active').checked
            };

            if (!formData.title || !formData.category || !formData.summary) {
                showNotification('å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
                return;
            }

            if (!currentData.news) currentData.news = [];

            formData.id = Date.now();
            formData.createdAt = new Date().toISOString();
            currentData.news.push(formData);

            saveData();
            closeNewsModal();
            renderNews();
            showNotification('ãŠçŸ¥ã‚‰ã›ã‚’ä¿å­˜ã—ã¾ã—ãŸ', 'success');
        }

        function deleteNews(newsId) {
            if (confirm('ã“ã®ãŠçŸ¥ã‚‰ã›ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) {
                currentData.news = currentData.news.filter(n => n.id !== newsId);
                saveData();
                renderNews();
                showNotification('ãŠçŸ¥ã‚‰ã›ã‚’å‰Šé™¤ã—ã¾ã—ãŸ', 'success');
            }
        }

        function renderNews() {
            const container = document.getElementById('news-list');
            if (!currentData.news || currentData.news.length === 0) {
                container.innerHTML = '<p>ãŠçŸ¥ã‚‰ã›ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>';
                return;
            }

            const html = `
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ç”»åƒ</th>
                            <th>ã‚¿ã‚¤ãƒˆãƒ«</th>
                            <th>ã‚«ãƒ†ã‚´ãƒª</th>
                            <th>å…¬é–‹æ—¥</th>
                            <th>å„ªå…ˆåº¦</th>
                            <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${currentData.news.map(news => `
                            <tr>
                                <td>
                                    ${news.image ?
                                        `<img src="${getImageUrl(news.image)}" alt="${news.title}" style="width: 50px; height: 40px; object-fit: cover; border-radius: 4px;">` :
                                        'ğŸ“°'
                                    }
                                </td>
                                <td>
                                    <strong>${news.title}</strong>
                                    ${news.featured ? '<span style="color: #d4af37; margin-left: 5px;">â­</span>' : ''}
                                </td>
                                <td>
                                    <span class="status-badge ${getCategoryClass(news.category)}">
                                        ${news.category}
                                    </span>
                                </td>
                                <td>${new Date(news.date).toLocaleDateString('ja-JP')}</td>
                                <td>
                                    <span class="status-badge ${getPriorityClass(news.priority)}">
                                        ${getPriorityLabel(news.priority)}
                                    </span>
                                </td>
                                <td>
                                    <span class="status-badge ${news.active ? 'status-active' : 'status-inactive'}">
                                        ${news.active ? 'å…¬é–‹ä¸­' : 'éå…¬é–‹'}
                                    </span>
                                </td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn-sm btn-edit" onclick="openNewsModal(${news.id})">ç·¨é›†</button>
                                        <button class="btn-sm btn-delete" onclick="deleteNews(${news.id})">å‰Šé™¤</button>
                                    </div>
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
            container.innerHTML = html;
        }

        function getCategoryClass(category) {
            const classes = {
                'æ–°å•†å“': 'category-new',
                'ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³': 'category-campaign',
                'ãŠçŸ¥ã‚‰ã›': 'category-notice',
                'ã‚¤ãƒ™ãƒ³ãƒˆ': 'category-event',
                'é‡è¦': 'category-important'
            };
            return classes[category] || 'status-active';
        }

        function getPriorityClass(priority) {
            const classes = {
                'normal': 'status-active',
                'high': 'status-warning',
                'urgent': 'status-inactive'
            };
            return classes[priority] || 'status-active';
        }

        function getPriorityLabel(priority) {
            const labels = {
                'normal': 'é€šå¸¸',
                'high': 'é«˜',
                'urgent': 'ç·Šæ€¥'
            };
            return labels[priority] || 'é€šå¸¸';
        }

        // å•†å“é–¢é€£
        function openProductModal(productId = null) {
            const modal = document.getElementById('product-modal');
            const title = document.getElementById('product-modal-title');

            if (productId) {
                title.textContent = 'å•†å“ç·¨é›†';
                window.editingProductId = productId;
                const product = currentData.products.find(p => p.id === productId);
                if (product) {
                    document.getElementById('product-title').value = product.title || '';
                    document.getElementById('product-category').value = product.category || '';
                    document.getElementById('product-price').value = product.price || '';
                    document.getElementById('product-date').value = product.date || '';
                    document.getElementById('product-description').value = product.description || '';
                    document.getElementById('product-ingredients').value = product.ingredients || '';
                    document.getElementById('product-tags').value = product.tags || '';
                    document.getElementById('product-featured').checked = product.featured || false;
                    document.getElementById('product-active').checked = product.active !== false;

                    if (product.image) {
                        document.getElementById('product-image-preview').innerHTML = `
                            <div class="image-preview-container">
                                <img src="${getImageUrl(product.image)}" alt="ç¾åœ¨ã®ç”»åƒ" style="max-width: 200px; max-height: 150px; border-radius: 8px;">
                                <p style="margin-top: 5px; font-size: 12px; color: #666;">ç¾åœ¨ã®ç”»åƒ</p>
                            </div>
                        `;
                        document.getElementById('product-image').value = product.image;
                    }
                }
            } else {
                title.textContent = 'æ–°è¦å•†å“ç™»éŒ²';
                window.editingProductId = null;
                document.getElementById('product-form').reset();
                document.getElementById('product-image-preview').innerHTML = '';
                document.getElementById('product-date').value = new Date().toISOString().split('T')[0];
                document.getElementById('product-active').checked = true;
            }

            modal.style.display = 'block';
        }

        function closeProductModal() {
            document.getElementById('product-modal').style.display = 'none';
        }

        function saveProduct() {
            const formData = {
                title: document.getElementById('product-title').value,
                category: document.getElementById('product-category').value,
                price: document.getElementById('product-price').value,
                date: document.getElementById('product-date').value,
                description: document.getElementById('product-description').value,
                ingredients: document.getElementById('product-ingredients').value,
                image: document.getElementById('product-image').value,
                tags: document.getElementById('product-tags').value,
                featured: document.getElementById('product-featured').checked,
                active: document.getElementById('product-active').checked
            };

            if (!formData.title.trim()) {
                showNotification('å•†å“åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
                return;
            }

            if (!formData.category) {
                showNotification('ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠã—ã¦ãã ã•ã„', 'error');
                return;
            }

            if (!formData.price.trim()) {
                showNotification('ä¾¡æ ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
                return;
            }

            if (!formData.description.trim()) {
                showNotification('å•†å“èª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
                return;
            }

            const existingProductIndex = currentData.products.findIndex(p =>
                p.title === formData.title && (!window.editingProductId || p.id !== window.editingProductId)
            );

            if (existingProductIndex !== -1) {
                showNotification('åŒã˜å•†å“åãŒæ—¢ã«å­˜åœ¨ã—ã¾ã™', 'error');
                return;
            }

            if (window.editingProductId) {
                const productIndex = currentData.products.findIndex(p => p.id === window.editingProductId);
                if (productIndex !== -1) {
                    currentData.products[productIndex] = {
                        ...currentData.products[productIndex],
                        ...formData,
                        updatedAt: new Date().toISOString()
                    };
                }
                showNotification('å•†å“æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸ', 'success');
                window.editingProductId = null;
            } else {
                const newProduct = {
                    ...formData,
                    id: 'product_' + Date.now(),
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                currentData.products.push(newProduct);
                showNotification('æ–°ã—ã„å•†å“ã‚’ç™»éŒ²ã—ã¾ã—ãŸ', 'success');
            }

            saveData();
            closeProductModal();
            renderProducts();
        }

        function deleteProduct(productId) {
            if (confirm('ã“ã®å•†å“ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) {
                const productIndex = currentData.products.findIndex(p => p.id === productId);
                if (productIndex !== -1) {
                    const deletedProduct = currentData.products.splice(productIndex, 1)[0];
                    saveData();
                    renderProducts();
                    showNotification(`ã€Œ${deletedProduct.title}ã€ã‚’å‰Šé™¤ã—ã¾ã—ãŸ`, 'success');
                }
            }
        }

        function renderProducts() {
            const productsContainer = document.getElementById('products-list');
            if (!currentData.products) currentData.products = [];

            productsContainer.innerHTML = '';

            if (currentData.products.length === 0) {
                productsContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-shopping-cart" style="font-size: 48px; color: #ccc; margin-bottom: 16px;"></i>
                        <h3>å•†å“ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</h3>
                        <p>ã€Œæ–°è¦å•†å“ç™»éŒ²ã€ãƒœã‚¿ãƒ³ã‹ã‚‰æœ€åˆã®å•†å“ã‚’ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚</p>
                    </div>
                `;
                return;
            }

            currentData.products.forEach(product => {
                const productElement = document.createElement('div');
                productElement.className = 'news-item';
                productElement.innerHTML = `
                    <div class="news-header">
                        <h3>${product.title || 'ç„¡é¡Œ'}</h3>
                        <div class="news-actions">
                            <button class="btn btn-sm btn-outline" onclick="openProductModal('${product.id}')">
                                <i class="fas fa-edit"></i> ç·¨é›†
                            </button>
                            <button class="btn btn-sm btn-danger" onclick="deleteProduct('${product.id}')">
                                <i class="fas fa-trash"></i> å‰Šé™¤
                            </button>
                        </div>
                    </div>
                    <div class="news-meta">
                        <span class="badge ${getProductCategoryClass(product.category)}">${product.category || 'æœªåˆ†é¡'}</span>
                        <span class="meta-item"><i class="fas fa-yen-sign"></i> ${product.price || 'ä¾¡æ ¼æœªè¨­å®š'}</span>
                        <span class="meta-item"><i class="fas fa-calendar"></i> ${formatDate(product.date)}</span>
                        <span class="status-badge ${product.active ? 'active' : 'inactive'}">
                            ${product.active ? 'å…¬é–‹ä¸­' : 'éå…¬é–‹'}
                        </span>
                    </div>
                    <div class="news-content">
                        ${product.image ? `<img src="${getImageUrl(product.image)}" alt="${product.title}" class="content-image">` : ''}
                        <p>${product.description || 'èª¬æ˜ãŒã‚ã‚Šã¾ã›ã‚“'}</p>
                    </div>
                `;
                productsContainer.appendChild(productElement);
            });
        }


        // ã‚®ãƒ•ãƒˆé–¢é€£
        function openGiftModal(giftId = null) {
            const modal = document.getElementById('gift-modal');
            const title = document.getElementById('gift-modal-title');

            if (giftId) {
                title.textContent = 'ã‚®ãƒ•ãƒˆç·¨é›†';
                window.editingGiftId = giftId;
                const gift = currentData.gifts.find(g => g.id === giftId);
                if (gift) {
                    document.getElementById('gift-title').value = gift.title || '';
                    document.getElementById('gift-type').value = gift.type || '';
                    document.getElementById('gift-price').value = gift.price || '';
                    document.getElementById('gift-date').value = gift.date || '';
                    document.getElementById('gift-contents').value = gift.contents || '';
                    document.getElementById('gift-description').value = gift.description || '';
                    document.getElementById('gift-tags').value = gift.tags || '';
                    document.getElementById('gift-noshi').checked = gift.noshi || false;
                    document.getElementById('gift-wrapping').checked = gift.wrapping || false;
                    document.getElementById('gift-message').checked = gift.message || false;
                    document.getElementById('gift-featured').checked = gift.featured || false;
                    document.getElementById('gift-active').checked = gift.active !== false;

                    if (gift.image) {
                        document.getElementById('gift-image-preview').innerHTML = `
                            <div class="image-preview-container">
                                <img src="${getImageUrl(gift.image)}" alt="ç¾åœ¨ã®ç”»åƒ" style="max-width: 200px; max-height: 150px; border-radius: 8px;">
                                <p style="margin-top: 5px; font-size: 12px; color: #666;">ç¾åœ¨ã®ç”»åƒ</p>
                            </div>
                        `;
                        document.getElementById('gift-image').value = gift.image;
                    }
                }
            } else {
                title.textContent = 'æ–°è¦ã‚®ãƒ•ãƒˆç™»éŒ²';
                window.editingGiftId = null;
                document.getElementById('gift-form').reset();
                document.getElementById('gift-image-preview').innerHTML = '';
                document.getElementById('gift-date').value = new Date().toISOString().split('T')[0];
                document.getElementById('gift-active').checked = true;
            }

            modal.style.display = 'block';
        }

        function closeGiftModal() {
            document.getElementById('gift-modal').style.display = 'none';
        }

        function saveGift() {
            const formData = {
                title: document.getElementById('gift-title').value,
                type: document.getElementById('gift-type').value,
                price: document.getElementById('gift-price').value,
                date: document.getElementById('gift-date').value,
                contents: document.getElementById('gift-contents').value,
                description: document.getElementById('gift-description').value,
                image: document.getElementById('gift-image').value,
                tags: document.getElementById('gift-tags').value,
                noshi: document.getElementById('gift-noshi').checked,
                wrapping: document.getElementById('gift-wrapping').checked,
                message: document.getElementById('gift-message').checked,
                featured: document.getElementById('gift-featured').checked,
                active: document.getElementById('gift-active').checked
            };

            if (!formData.title.trim()) {
                showNotification('ã‚®ãƒ•ãƒˆåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
                return;
            }

            if (!formData.type) {
                showNotification('ã‚®ãƒ•ãƒˆã‚¿ã‚¤ãƒ—ã‚’é¸æŠã—ã¦ãã ã•ã„', 'error');
                return;
            }

            if (!formData.price.trim()) {
                showNotification('ä¾¡æ ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
                return;
            }

            if (!formData.contents.trim()) {
                showNotification('ã‚®ãƒ•ãƒˆå†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
                return;
            }

            const existingGiftIndex = currentData.gifts.findIndex(g =>
                g.title === formData.title && (!window.editingGiftId || g.id !== window.editingGiftId)
            );

            if (existingGiftIndex !== -1) {
                showNotification('åŒã˜ã‚®ãƒ•ãƒˆåãŒæ—¢ã«å­˜åœ¨ã—ã¾ã™', 'error');
                return;
            }

            if (window.editingGiftId) {
                const giftIndex = currentData.gifts.findIndex(g => g.id === window.editingGiftId);
                if (giftIndex !== -1) {
                    currentData.gifts[giftIndex] = {
                        ...currentData.gifts[giftIndex],
                        ...formData,
                        updatedAt: new Date().toISOString()
                    };
                }
                showNotification('ã‚®ãƒ•ãƒˆæƒ…å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸ', 'success');
                window.editingGiftId = null;
            } else {
                const newGift = {
                    ...formData,
                    id: 'gift_' + Date.now(),
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                currentData.gifts.push(newGift);
                showNotification('æ–°ã—ã„ã‚®ãƒ•ãƒˆã‚’ç™»éŒ²ã—ã¾ã—ãŸ', 'success');
            }

            saveData();
            closeGiftModal();
            renderGifts();
        }

        function deleteGift(giftId) {
            if (confirm('ã“ã®ã‚®ãƒ•ãƒˆã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) {
                const giftIndex = currentData.gifts.findIndex(g => g.id === giftId);
                if (giftIndex !== -1) {
                    const deletedGift = currentData.gifts.splice(giftIndex, 1)[0];
                    saveData();
                    renderGifts();
                    showNotification(`ã€Œ${deletedGift.title}ã€ã‚’å‰Šé™¤ã—ã¾ã—ãŸ`, 'success');
                }
            }
        }

        function renderGifts() {
            const giftsContainer = document.getElementById('gifts-list');
            if (!currentData.gifts) currentData.gifts = [];

            giftsContainer.innerHTML = '';

            if (currentData.gifts.length === 0) {
                giftsContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-gift" style="font-size: 48px; color: #ccc; margin-bottom: 16px;"></i>
                        <h3>ã‚®ãƒ•ãƒˆãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</h3>
                        <p>ã€Œæ–°è¦ã‚®ãƒ•ãƒˆç™»éŒ²ã€ãƒœã‚¿ãƒ³ã‹ã‚‰æœ€åˆã®ã‚®ãƒ•ãƒˆã‚’ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚</p>
                    </div>
                `;
                return;
            }

            currentData.gifts.forEach(gift => {
                const giftElement = document.createElement('div');
                giftElement.className = 'news-item';
                giftElement.innerHTML = `
                    <div class="news-header">
                        <h3>${gift.title || 'ç„¡é¡Œ'}</h3>
                        <div class="news-actions">
                            <button class="btn btn-sm btn-outline" onclick="openGiftModal('${gift.id}')">
                                <i class="fas fa-edit"></i> ç·¨é›†
                            </button>
                            <button class="btn btn-sm btn-danger" onclick="deleteGift('${gift.id}')">
                                <i class="fas fa-trash"></i> å‰Šé™¤
                            </button>
                        </div>
                    </div>
                    <div class="news-meta">
                        <span class="badge ${getGiftTypeClass(gift.type)}">${gift.type || 'æœªåˆ†é¡'}</span>
                        <span class="meta-item"><i class="fas fa-yen-sign"></i> ${gift.price || 'ä¾¡æ ¼æœªè¨­å®š'}</span>
                        <span class="meta-item"><i class="fas fa-calendar"></i> ${formatDate(gift.date)}</span>
                        <span class="status-badge ${gift.active ? 'active' : 'inactive'}">
                            ${gift.active ? 'è²©å£²ä¸­' : 'éå…¬é–‹'}
                        </span>
                    </div>
                    <div class="news-content">
                        ${gift.image ? `<img src="${getImageUrl(gift.image)}" alt="${gift.title}" class="content-image">` : ''}
                        <p>${gift.contents || 'å†…å®¹ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“'}</p>
                        ${getGiftServices(gift)}
                    </div>
                `;
                giftsContainer.appendChild(giftElement);
            });
        }


        function getGiftServices(gift) {
            const services = [];
            if (gift.noshi) services.push('ã®ã—å¯¾å¿œ');
            if (gift.wrapping) services.push('åŒ…è£…å¯¾å¿œ');
            if (gift.message) services.push('ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚«ãƒ¼ãƒ‰');

            return services.length > 0 ?
                `<div class="gift-services">ğŸ ${services.join(' | ')}</div>` : '';
        }

        // ãƒ¬ãƒ“ãƒ¥ãƒ¼é–¢é€£
        function openReviewModal(reviewId = null) {
            const modal = document.getElementById('review-modal');
            const title = document.getElementById('review-modal-title');

            if (reviewId) {
                title.textContent = 'ãŠå®¢æ§˜ã®å£°ç·¨é›†';
                window.editingReviewId = reviewId;
                const review = currentData.reviews.find(r => r.id === reviewId);
                if (review) {
                    document.getElementById('review-customer-name').value = review.customerName || '';
                    document.getElementById('review-rating').value = review.rating || '';
                    document.getElementById('review-product').value = review.product || '';
                    document.getElementById('review-date').value = review.date || '';
                    document.getElementById('review-content').value = review.content || '';
                    document.getElementById('review-age').value = review.age || '';
                    document.getElementById('review-gender').value = review.gender || '';
                    document.getElementById('review-tags').value = review.tags || '';
                    document.getElementById('review-featured').checked = review.featured || false;
                    document.getElementById('review-active').checked = review.active !== false;

                    if (review.image) {
                        document.getElementById('review-image-preview').innerHTML = `
                            <div class="image-preview-container">
                                <img src="${getImageUrl(review.image)}" alt="ç¾åœ¨ã®ç”»åƒ" style="max-width: 200px; max-height: 150px; border-radius: 8px;">
                                <p style="margin-top: 5px; font-size: 12px; color: #666;">ç¾åœ¨ã®ç”»åƒ</p>
                            </div>
                        `;
                        document.getElementById('review-image').value = review.image;
                    }
                }
            } else {
                title.textContent = 'æ–°è¦ãŠå®¢æ§˜ã®å£°ç™»éŒ²';
                window.editingReviewId = null;
                document.getElementById('review-form').reset();
                document.getElementById('review-image-preview').innerHTML = '';
                document.getElementById('review-date').value = new Date().toISOString().split('T')[0];
                document.getElementById('review-active').checked = true;
            }

            modal.style.display = 'block';
        }

        function closeReviewModal() {
            document.getElementById('review-modal').style.display = 'none';
        }

        function saveReview() {
            const formData = {
                customerName: document.getElementById('review-customer-name').value,
                rating: document.getElementById('review-rating').value,
                product: document.getElementById('review-product').value,
                date: document.getElementById('review-date').value,
                content: document.getElementById('review-content').value,
                age: document.getElementById('review-age').value,
                gender: document.getElementById('review-gender').value,
                image: document.getElementById('review-image').value,
                tags: document.getElementById('review-tags').value,
                featured: document.getElementById('review-featured').checked,
                active: document.getElementById('review-active').checked
            };

            if (!formData.customerName.trim()) {
                showNotification('ãŠå®¢æ§˜åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
                return;
            }

            if (!formData.rating) {
                showNotification('è©•ä¾¡ã‚’é¸æŠã—ã¦ãã ã•ã„', 'error');
                return;
            }

            if (!formData.content.trim()) {
                showNotification('ãŠå®¢æ§˜ã®å£°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
                return;
            }

            if (window.editingReviewId) {
                const reviewIndex = currentData.reviews.findIndex(r => r.id === window.editingReviewId);
                if (reviewIndex !== -1) {
                    currentData.reviews[reviewIndex] = {
                        ...currentData.reviews[reviewIndex],
                        ...formData,
                        updatedAt: new Date().toISOString()
                    };
                }
                showNotification('ãŠå®¢æ§˜ã®å£°ã‚’æ›´æ–°ã—ã¾ã—ãŸ', 'success');
                window.editingReviewId = null;
            } else {
                const newReview = {
                    ...formData,
                    id: 'review_' + Date.now(),
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                currentData.reviews.push(newReview);
                showNotification('æ–°ã—ã„ãŠå®¢æ§˜ã®å£°ã‚’ç™»éŒ²ã—ã¾ã—ãŸ', 'success');
            }

            saveData();
            closeReviewModal();
            renderReviews();
        }

        function deleteReview(reviewId) {
            if (confirm('ã“ã®ãŠå®¢æ§˜ã®å£°ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) {
                const reviewIndex = currentData.reviews.findIndex(r => r.id === reviewId);
                if (reviewIndex !== -1) {
                    const deletedReview = currentData.reviews.splice(reviewIndex, 1)[0];
                    saveData();
                    renderReviews();
                    showNotification(`ã€Œ${deletedReview.customerName}æ§˜ã€ã®å£°ã‚’å‰Šé™¤ã—ã¾ã—ãŸ`, 'success');
                }
            }
        }

        function renderReviews() {
            const reviewsContainer = document.getElementById('reviews-list');
            if (!currentData.reviews) currentData.reviews = [];

            reviewsContainer.innerHTML = '';

            if (currentData.reviews.length === 0) {
                reviewsContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-comments" style="font-size: 48px; color: #ccc; margin-bottom: 16px;"></i>
                        <h3>ãŠå®¢æ§˜ã®å£°ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</h3>
                        <p>ã€Œæ–°è¦ãŠå®¢æ§˜ã®å£°ç™»éŒ²ã€ãƒœã‚¿ãƒ³ã‹ã‚‰æœ€åˆã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚</p>
                    </div>
                `;
                return;
            }

            currentData.reviews.forEach(review => {
                const reviewElement = document.createElement('div');
                reviewElement.className = 'news-item';
                reviewElement.innerHTML = `
                    <div class="news-header">
                        <h3>${review.customerName || 'åŒ¿å'}æ§˜</h3>
                        <div class="news-actions">
                            <button class="btn btn-sm btn-outline" onclick="openReviewModal('${review.id}')">
                                <i class="fas fa-edit"></i> ç·¨é›†
                            </button>
                            <button class="btn btn-sm btn-danger" onclick="deleteReview('${review.id}')">
                                <i class="fas fa-trash"></i> å‰Šé™¤
                            </button>
                        </div>
                    </div>
                    <div class="news-meta">
                        <span class="badge category-review">${getStarRating(review.rating)}</span>
                        ${review.product ? `<span class="meta-item"><i class="fas fa-shopping-bag"></i> ${review.product}</span>` : ''}
                        <span class="meta-item"><i class="fas fa-calendar"></i> ${formatDate(review.date)}</span>
                        ${review.age || review.gender ? `<span class="meta-item"><i class="fas fa-user"></i> ${[review.age, review.gender].filter(x => x).join(' ')}</span>` : ''}
                        <span class="status-badge ${review.active ? 'active' : 'inactive'}">
                            ${review.active ? 'å…¬é–‹ä¸­' : 'éå…¬é–‹'}
                        </span>
                    </div>
                    <div class="news-content">
                        ${review.image ? `<img src="${getImageUrl(review.image)}" alt="${review.customerName}æ§˜" class="content-image">` : ''}
                        <p>"${review.content || 'ã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã‚Šã¾ã›ã‚“'}"</p>
                    </div>
                `;
                reviewsContainer.appendChild(reviewElement);
            });
        }


        // ã‚µã‚¤ãƒˆè¨­å®šé–¢é€£
        function loadSettings() {
            if (currentData.settings) {
                document.getElementById('site-name').value = currentData.settings.siteName || '';
                document.getElementById('site-phone').value = currentData.settings.phone || '';
                document.getElementById('site-address').value = currentData.settings.address || '';
                document.getElementById('site-hours').value = currentData.settings.hours || '';
                document.getElementById('site-email').value = currentData.settings.email || '';
                document.getElementById('site-description').value = currentData.settings.description || '';
                document.getElementById('site-facebook').value = currentData.settings.facebook || '';
                document.getElementById('site-instagram').value = currentData.settings.instagram || '';
                document.getElementById('site-twitter').value = currentData.settings.twitter || '';
                document.getElementById('site-line').value = currentData.settings.line || '';
                document.getElementById('site-shipping').value = currentData.settings.shipping || '';
                document.getElementById('site-notice').value = currentData.settings.notice || '';
            }
        }

        function saveSettings() {
            const formData = {
                siteName: document.getElementById('site-name').value,
                phone: document.getElementById('site-phone').value,
                address: document.getElementById('site-address').value,
                hours: document.getElementById('site-hours').value,
                email: document.getElementById('site-email').value,
                description: document.getElementById('site-description').value,
                facebook: document.getElementById('site-facebook').value,
                instagram: document.getElementById('site-instagram').value,
                twitter: document.getElementById('site-twitter').value,
                line: document.getElementById('site-line').value,
                shipping: document.getElementById('site-shipping').value,
                notice: document.getElementById('site-notice').value,
                lastUpdated: new Date().toISOString()
            };

            // åŸºæœ¬æƒ…å ±ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            if (!formData.siteName.trim()) {
                showNotification('ã‚µã‚¤ãƒˆåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
                return;
            }

            currentData.settings = formData;
            saveData();
            showNotification('è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ', 'success');
        }

        // é€šçŸ¥è¡¨ç¤º
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;

            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
        function handleImageUpload(input, previewId) {
            const file = input.files[0];
            const previewDiv = document.getElementById(previewId);
            const hiddenInput = input.parentElement.querySelector('input[type="hidden"]');

            if (!file) {
                previewDiv.innerHTML = '';
                if (hiddenInput) hiddenInput.value = '';
                return;
            }

            // ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯ (2MBåˆ¶é™)
            if (file.size > 2 * 1024 * 1024) {
                alert('âš ï¸ ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒå¤§ãã™ãã¾ã™ã€‚2MBä»¥ä¸‹ã®ç”»åƒã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                input.value = '';
                return;
            }

            // ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ãƒã‚§ãƒƒã‚¯
            if (!file.type.startsWith('image/')) {
                alert('âš ï¸ ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                input.value = '';
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
                previewDiv.innerHTML = `
                    <div class="image-preview-container">
                        <img src="${e.target.result}" alt="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼" style="max-width: 200px; max-height: 150px; border-radius: 8px; border: 2px solid #ddd;">
                        <p style="margin-top: 5px; font-size: 12px; color: #666;">
                            ğŸ“ ${file.name} (${(file.size / 1024).toFixed(1)}KB)
                        </p>
                        <button type="button" onclick="removeImagePreview('${previewId}', '${input.id}')"
                                style="margin-top: 5px; padding: 4px 8px; background: #dc3545; color: white; border: none; border-radius: 4px; font-size: 12px; cursor: pointer;">
                            ğŸ—‘ï¸ å‰Šé™¤
                        </button>
                    </div>
                `;

                // Base64ãƒ‡ãƒ¼ã‚¿ã‚’éš ã—ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ä¿å­˜
                if (hiddenInput) {
                    hiddenInput.value = e.target.result;
                }
            };

            reader.readAsDataURL(file);
        }

        // ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼å‰Šé™¤
        function removeImagePreview(previewId, inputId) {
            document.getElementById(previewId).innerHTML = '';
            document.getElementById(inputId).value = '';
            const hiddenInput = document.getElementById(inputId).parentElement.querySelector('input[type="hidden"]');
            if (hiddenInput) hiddenInput.value = '';
        }

        // ç”»åƒURLç”Ÿæˆ (Base64ã¾ãŸã¯ãƒ‘ã‚¹)
        function getImageUrl(imageData) {
            if (!imageData) return 'images/default-placeholder.jpg';

            // Base64ãƒ‡ãƒ¼ã‚¿ã®å ´åˆ
            if (imageData.startsWith('data:image/')) {
                return imageData;
            }

            // ãƒ‘ã‚¹ã®å ´åˆ
            return imageData;
        }

        // å•†å“å‰Šé™¤æ©Ÿèƒ½ã®è¿½åŠ ï¼ˆæ—¢å­˜ã®renderProducts()ã‚’æ´»ç”¨ï¼‰
        function deleteProduct(productId) {
            if (confirm('ã“ã®å•†å“ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) {
                const productIndex = currentData.products.findIndex(p => p.id === productId);
                if (productIndex !== -1) {
                    const deletedProduct = currentData.products.splice(productIndex, 1)[0];
                    saveData();
                    renderProducts();
                    showNotification(`ã€Œ${deletedProduct.title}ã€ã‚’å‰Šé™¤ã—ã¾ã—ãŸ`, 'success');
                }
            }
        }

        // ã‚®ãƒ•ãƒˆé–¢é€£
        function renderGifts() {
            const container = document.getElementById('gifts-list');
            if (!currentData.gifts || currentData.gifts.length === 0) {
                container.innerHTML = '<p>ã‚®ãƒ•ãƒˆãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>';
                return;
            }

            const html = `
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ç”»åƒ</th>
                            <th>ã‚®ãƒ•ãƒˆå</th>
                            <th>ã‚¿ã‚¤ãƒ—</th>
                            <th>ä¾¡æ ¼</th>
                            <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${currentData.gifts.map(gift => `
                            <tr>
                                <td>
                                    ${gift.image ?
                                        `<img src="${getImageUrl(gift.image)}" alt="${gift.title}" style="width: 50px; height: 40px; object-fit: cover; border-radius: 4px;">` :
                                        'ğŸ'
                                    }
                                </td>
                                <td>
                                    <strong>${gift.title}</strong>
                                    ${gift.featured ? '<span style="color: #d4af37; margin-left: 5px;">â­</span>' : ''}
                                </td>
                                <td>
                                    <span class="status-badge category-${gift.type}">
                                        ${gift.type}
                                    </span>
                                </td>
                                <td>Â¥${gift.price ? gift.price.toLocaleString() : 'æœªè¨­å®š'}</td>
                                <td>
                                    <span class="status-badge ${gift.active ? 'status-active' : 'status-inactive'}">
                                        ${gift.active ? 'è²©å£²ä¸­' : 'éå…¬é–‹'}
                                    </span>
                                </td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn-sm btn-edit" onclick="openGiftModal(${gift.id})">ç·¨é›†</button>
                                        <button class="btn-sm btn-delete" onclick="deleteGift(${gift.id})">å‰Šé™¤</button>
                                    </div>
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
            container.innerHTML = html;
        }

        function deleteGift(giftId) {
            if (confirm('ã“ã®ã‚®ãƒ•ãƒˆã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) {
                currentData.gifts = currentData.gifts.filter(g => g.id !== giftId);
                saveData();
                renderGifts();
                showNotification('ã‚®ãƒ•ãƒˆã‚’å‰Šé™¤ã—ã¾ã—ãŸ', 'success');
            }
        }


        // ãƒ¬ãƒ“ãƒ¥ãƒ¼é–¢é€£
        function renderReviews() {
            const container = document.getElementById('reviews-list');
            if (!currentData.reviews || currentData.reviews.length === 0) {
                container.innerHTML = '<p>ãŠå®¢æ§˜ã®å£°ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>';
                return;
            }

            const html = `
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ãŠå®¢æ§˜</th>
                            <th>è©•ä¾¡</th>
                            <th>å•†å“</th>
                            <th>æŠ•ç¨¿æ—¥</th>
                            <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${currentData.reviews.map(review => `
                            <tr>
                                <td>
                                    <strong>${review.customerName}</strong><br>
                                    <small>${review.age}ä»£ ${review.gender}</small>
                                </td>
                                <td>
                                    <div style="color: #ffd700;">
                                        ${'â˜…'.repeat(review.rating)}${'â˜†'.repeat(5 - review.rating)}
                                    </div>
                                    <small>${review.rating}/5</small>
                                </td>
                                <td>${review.product || 'æœªæŒ‡å®š'}</td>
                                <td>${new Date(review.date).toLocaleDateString('ja-JP')}</td>
                                <td>
                                    <span class="status-badge ${review.active ? 'status-active' : 'status-inactive'}">
                                        ${review.active ? 'å…¬é–‹ä¸­' : 'éå…¬é–‹'}
                                    </span>
                                </td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn-sm btn-edit" onclick="openReviewModal(${review.id})">ç·¨é›†</button>
                                        <button class="btn-sm btn-delete" onclick="deleteReview(${review.id})">å‰Šé™¤</button>
                                    </div>
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
            container.innerHTML = html;
        }

        function deleteReview(reviewId) {
            if (confirm('ã“ã®ãŠå®¢æ§˜ã®å£°ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) {
                currentData.reviews = currentData.reviews.filter(r => r.id !== reviewId);
                saveData();
                renderReviews();
                showNotification('ãŠå®¢æ§˜ã®å£°ã‚’å‰Šé™¤ã—ã¾ã—ãŸ', 'success');
            }
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
        window.onclick = function(event) {
            const newsModal = document.getElementById('news-modal');

            if (event.target === newsModal) {
                closeNewsModal();
            }
        }
    </script>
</body>
</html>